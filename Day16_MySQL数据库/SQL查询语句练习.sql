-- DQL-- 查询所有学生信息select * from tb_student;-- 查询所有课程名称及学分(投影和别名)select `couname` as 课程名称, `coucredit` as 学分 from tb_course;-- 查询所有女学生的姓名和出生日期(筛选)select stuname, stubirth from tb_student where stusex=0;-- 查询所有80后女学生的姓名、性别(显示成'女')和出生日期(筛选)select stuname, case stusex when 1 then '男' else '女' end as 性别,stubirth from tb_student where stubirth between '1980-01-01' and '1989-12-31' and stusex=0;-- 查询姓“林”的学生姓名和性别(模糊)select stuname, stusex from tb_student where stuname like '林%';-- 查询姓“张”名字总共两个字的老师的姓名和职称(模糊)select teaname, teatitle from tb_teacher where teaname like '张_';-- 查询姓“张”名字总共三个字的老师的姓名和职称(模糊)select teaname, teatitle from tb_teacher where teaname like '张__';-- 查询名字中有“天”字的学生的姓名(模糊)select stuname from tb_student where stuname like '%天%';-- 查询学生的籍贯(去重)select distinct stuaddr from tb_student where stuaddr is not null and stuaddr<>'';-- 查询男学生的姓名和生日按年龄从大到小排列(排序)select stuname, stubirth from tb_student where stusex=1 order by stubirth asc;-- 查询年龄最大/最小的学生的出生日期(聚合函数)select min(stubirth) from tb_student;select max(stubirth) from tb_student;-- 查询学生/男学生/女学生的总人数select count(stuid) from tb_student;select count(stuid) from tb_student where stusex=1;select count(stuid) from tb_student where stusex=0;-- 查询1111课程的平均分/最低分/最高分/选课人数/考试人数select avg(scmark) from tb_score where couid=1111;select min(scmark) from tb_score where couid=1111;select max(scmark) from tb_score where couid=1111;select count(stuid) from tb_score where couid=1111;select count(scmark) from tb_score where couid=1111;-- 查询男女学生的人数(分组和聚合函数)select count(stuid) from tb_student;select if(stusex, '男','女') as 性别, count(stuid) as 人数 from tb_student group by stusex;-- 查询学号为1001的学生所有课程的平均分(筛选和聚合函数)select avg(scmark) from tb_score where stuid=1001;-- 查询每个学生的学号和平均成绩(分组和聚合函数)select stuid as 学号, avg(scmark) as 平均成绩 from tb_score group by stuid;-- 查询平均成绩大于等于80分的学生的学号和平均成绩(分组后的筛选)-- 分组以前的筛选用where-- 分完组后的筛选用havingselect stuid as 学号, avg(scmark) as 平均分 from `tb_score` group by stuid having 平均分>=80;-- 查询年龄最大的学生的姓名(子查询)select stuname from tb_student where stubirth=(	select min(stubirth) from tb_student);-- 查询年龄最大的学生的姓名和年龄(子查询+运算)select stuname, year(now()) - year(stubirth) as 年龄 from tb_student where stubirth = (	select min(stubirth) from tb_student);-- 查询选了三门及以上的课程的学生姓名(子查询/分组条件/集合运算)select stuname from tb_student where stuid in (	select stuid from tb_score group by stuid having count(`stuid`)>2);-- 查询课程名称、学分、授课老师的名字和职称(连接查询)select couname, coucredit, teaname, teatitle from `tb_course` a, `tb_teacher` b where a.`teaid`=b.teaid;-- 查询学生姓名和所在学院名称(连接查询)select stuname, colname from tb_student a, tb_college b where a.`colid`=b.`colid`;-- 查询学生姓名、课程名称以及考试成绩(连接查询)select stuname, couname, scmark from tb_student t1, `tb_course` t2, `tb_score` t3 where t1.stuid=t3.`stuid` and t2.`couid`=t3.`couid` and t3.scmark is not null;select stuname, couname, scmark from tb_student t1 inner join `tb_score` t3 on t1.stuid=t3.stuid inner join `tb_course` t2 on t2.`couid`=t3.couid where t3.scmark is not null order by scmark desc;-- 查询选课学生的姓名和平均成绩(子查询和连接查询)select stuname as 姓名, 平均分 from tb_student a, (	select stuid, avg(scmark) as 平均分 from tb_score group by stuid) b where a.stuid=b.stuid;-- 内连接方式查询select stuname as 姓名, 平均分 from tb_student a inner join (	select stuid, avg(scmark) as 平均分 from tb_score group by stuid) b on a.stuid=b.stuid;-- 外连接（outer join）:左外连接、右外连接、全外连接-- 左外连接，把左表查完整-- 右外连接，把右表差完整。-- MySQL不支持全外连接-- 查询每个学生的姓名和选课数量(左外连接和子查询)select stuname as 姓名, ifnull(选课数量, 0) as 选课数量 from tb_student t1 left join (	select stuid, count(stuid) as 选课数量 from tb_score group by stuid) t2 on t1.stuid=t2.stuid;